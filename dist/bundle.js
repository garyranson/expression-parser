!function t(e,r,n){function i(o,u){if(!r[o]){if(!e[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(s)return s(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var p=r[o]={exports:{}};e[o][0].call(p.exports,function(t){var r=e[o][1][t];return i(r||t)},p,p.exports,t,e,r,n)}return r[o].exports}for(var s="function"==typeof require&&require,o=0;o<n.length;o++)i(n[o]);return i}({1:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function t(t,e){this.raw=t,this.value=e}return t.prototype.visit=function(t){return t.visitLiteral(this.value,this.raw)},t}();r.Literal=n;var i=function(){function t(t){this.raw=t,this.type="LiteralxString"}return t.prototype.visit=function(t){return t.visitLiteral(this.raw,this.raw)},t}();r.LiteralString=i;var s=function(){function t(t){this.value=t}return t.prototype.visit=function(t){return t.visitLiteral(this.value,void 0)},t}();r.LiteralNumber=s;var o=function(){function t(t){this.name=t,this.type="ScopedAccessorExpression"}return t.prototype.visit=function(t){return t.visitScopedAccessor(this.name)},t}();r.ScopedAccessorExpression=o;var u=function(){function t(t,e,r){this.object=t,this.property=e,this.computed=r}return t.prototype.visit=function(t){return t.visitMember(this.object,this.property,this.computed)},t}();r.MemberAccessorExpression=u;var a=function(){function t(t,e,r){this.object=t,this.member=e,this.args=r}return t.prototype.visit=function(t){return t.visitMemberCall(this.object,this.member,this.args)},t}();r.MemberCallExpression=a;var c=function(){function t(t,e,r){this.test=t,this.consequent=e,this.alternate=r}return t.prototype.visit=function(t){return t.visitConditional(this.test,this.consequent,this.alternate)},t}();r.ConditionalExpression=c;var p=function(){function t(t,e){this.unaryType=t,this.argument=e}return t.prototype.visit=function(t){return t.visitUnary(this.unaryType,this.argument)},t}();r.UnaryExpression=p;var h=function(){function t(t,e){this.callee=t,this.args=e}return t.prototype.visit=function(t){return t.visitCall(this.callee,this.args)},t}();r.CallExpression=h;var f=function(){function t(t){this.elements=t}return t.prototype.visit=function(t){return t.visitArray(this.elements)},t}();r.ArrayExpression=f;var l=function(){function t(t,e){this.propertyNames=t,this.expressions=e}return t.prototype.visit=function(t){return t.visitObject(this.propertyNames,this.expressions)},t}();r.ObjectExpression=l;var d=function(){function t(t,e,r){this.operator=t,this.left=e,this.right=r}return t.prototype.visit=function(t){return t.visitBinary(this.operator,this.left,this.right)},t}();r.BinaryExpression=d;var x=function(){function t(t,e,r){this.operator=t,this.left=e,this.right=r}return t.prototype.visit=function(t){return t.visitBinary(this.operator,this.left,this.right)},t}();r.LogicalExpression=x},{}],2:[function(t,e,r){"use strict";function n(t){for(var e in t)r.hasOwnProperty(e)||(r[e]=t[e])}Object.defineProperty(r,"__esModule",{value:!0}),n(t("./scanner")),n(t("./lexer")),n(t("./parser")),n(t("./expressions"))},{"./expressions":1,"./lexer":3,"./parser":4,"./scanner":5}],3:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./scanner"),i=function(){function t(t){this.reader=new n.Scanner(t)}return t.prototype.next=function(){return this.reader.next()},t}();r.default=i},{"./scanner":5}],4:[function(t,e,r){"use strict";function n(t,e){switch(t){case"string":return new x.LiteralString(e);case"number":return new x.LiteralNumber(parseFloat(e))}}function i(t,e,r){return new x.MemberCallExpression(t,e,r)}function s(t,e,r){return new x.MemberAccessorExpression(t,e,r)}function o(t,e){return new x.CallExpression(t,e)}function u(t,e){return new x.UnaryExpression(t,e)}function a(t){return new x.ObjectExpression(t.names,t.expressions)}function c(t){return new x.ArrayExpression(t)}function p(t){switch(t){case"true":return y.literalTrue;case"false":return y.literalFalse;case"null":return y.literalNull;case"undefined":return y.literalUndefined}}function h(t,e,r){return new x.ConditionalExpression(t,e,r)}function f(t){return new x.ScopedAccessorExpression(t)}function l(t){switch(t){case"||":return g.or;case"&&":return g.and;case"==":return g.equal;case"!=":return g.notEqual;case"===":return g.absEqual;case"!==":return g.absNotEqual;case"<":return g.lessThan;case">":return g.greaterThan;case"<=":return g.lessEqualThan;case">=":return g.greaterEqualThan;case"+":return g.add;case"-":return g.subtract;case"*":return g.multiply;case"/":return g.divide;case"%":return g.modulus}}var d=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(r,"__esModule",{value:!0});var x=t("./expressions"),v=t("./lexer"),y={literalNull:new x.Literal("null",null),literalTrue:new x.Literal("true",!0),literalFalse:new x.Literal("false",!1),literalUndefined:new x.Literal("undefined",void 0)},m=[],E=function(){function t(t,e){this.operator=t,this.precedence=e}return t}(),w=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),e.prototype.create=function(t,e){return new x.BinaryExpression(this.operator,t,e)},e}(E),b=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),e.prototype.create=function(t,e){return new x.LogicalExpression(this.operator,t,e)},e}(E),g={or:new b("||",10),and:new b("&&",20),equal:new w("==",30),notEqual:new w("!=",30),absEqual:new w("===",30),absNotEqual:new w("!==",30),greaterThan:new w(">",40),lessThan:new w("<",40),greaterEqualThan:new w(">=",40),lessEqualThan:new w("<=",40),add:new w("+",50),subtract:new w("-",50),multiply:new w("*",60),divide:new w("/",60),modulus:new w("%",60)},k=function(){function t(){}return t.prototype.parseExpression=function(t){return new C(new v.default(t||"")).getExpression()},t}();r.default=k;var C=function(){function t(t){this.iterator=t,console.assert(!!t),this.consume()}return t.prototype.getExpression=function(){return this.eof()?y.literalUndefined:this.getExpression2()},t.prototype.getExpression2=function(){var t=this.parseExpression();if(this.eof())return t;this.raiseError("Unconsumed token "+this.cur.value)},t.prototype.consume=function(){this.cur=this.iterator.next()},t.prototype.expect=function(t){return this.cur.value===t&&(this.consume(),!0)},t.prototype.eof=function(){return"eof"===this.cur.type},t.prototype.parseExpression=function(){var t=this.parseIt();return"?"===this.cur.value?this.parseConditionalExpression(t):t},t.prototype.parseConditionalExpression=function(t){this.consume();var e=this.parseExpression();if(this.expect(":"))return h(t,e,this.parseExpression());this.raiseError("Conditional expression invalid")},t.prototype.parseIt=function(){var t=this.parsePrefix(),e=l(this.cur.value);if(e){this.consume();for(var r=1,n=0,i=[t,this.parsePrefix()],s=[e];e=l(this.cur.value);){for(this.consume();n>=0&&e.precedence<=s[n].precedence;)r--,i[r]=s[n--].create(i[r],i[r+1]);s[++n]=e,i[++r]=this.parsePrefix()}t=i[r];for(var o=r-1;o>=0;o--)t=s[n--].create(i[o],t)}return t},t.prototype.parsePrefix=function(){switch(this.cur.value){case"+":case"-":case"!":return this.parseUnary(this.cur.value)}for(var t=this.parsePrimary();;)switch(this.cur.value){case".":t=this.parseNamedMember(t);break;case"[":t=this.parseComputedMember(t);break;case"(":t=this.parseCallExpression(t);break;default:return t}},t.prototype.parseCallExpression=function(t){this.consume();var e=")"===this.cur.value?m:this.getExpressionList();if(this.expect(")"))return o(t,e);this.raiseError("Expected close bracket")},t.prototype.parseComputedMember=function(t){this.consume(),this.expect("]")&&this.raiseError("Expected expression");var e=this.parseExpression();if(this.expect("]"))return s(t,e,!0);this.raiseError("Expected closing ]")},t.prototype.parseNamedMember=function(t){if(this.consume(),"token"===this.cur.type){var e=n("string",this.cur.value);return this.consume(),"("===this.cur.value?i(t,e,this.parseArgs()):s(t,e,!1)}this.raiseError("Expected identifier")},t.prototype.parseUnary=function(t){return this.consume(),u(t,this.parsePrefix())},t.prototype.parsePrimary=function(){switch(this.cur.value){case"(":return this.parseBrackets();case"[":return this.parseArray();case"{":return this.parseObject();case"true":case"false":case"null":case"undefined":return this.parseKeyword(this.cur.value)}switch(this.cur.type){case"string":case"number":return this.parseLiteral(this.cur.type,this.cur.value);case"token":return this.parseIdentifier(this.cur.value)}this.raiseError("Unexpected token")},t.prototype.parseIdentifier=function(t){return this.consume(),f(t)},t.prototype.parseLiteral=function(t,e){return this.consume(),n(t,e)},t.prototype.parseKeyword=function(t){return this.consume(),p(t)},t.prototype.parseArray=function(){this.consume();var t="]"===this.cur.value?[]:this.getExpressionList();if(this.expect("]"))return c(t);this.raiseError("Unexpected token")},t.prototype.parseBrackets=function(){this.consume();var t=this.parseExpression();if(this.expect(")"))return t;this.raiseError("Expected )")},t.prototype.parseObject=function(){this.consume();var t=this.parseObjectProperties();if(this.expect("}"))return a(t);this.raiseError("Unexpected End")},t.prototype.parseObjectProperties=function(){var t=[],e=[];if("}"!==this.cur.value)do{"token"!==this.cur.type&&this.raiseError("Expected a name token"),t.push(this.cur.value),this.consume(),this.expect(":")||this.raiseError("Expected a colon"),e.push(this.parseExpression())}while(this.expect(","));return{names:t,expressions:e}},t.prototype.parseArgs=function(){if(this.consume(),this.expect(")"))return m;var t=this.getExpressionList();if(this.expect(")"))return t;this.raiseError("missing )")},t.prototype.getExpressionList=function(){var t=[];do{t.push(this.parseExpression())}while(this.expect(","));return t},t.prototype.raiseError=function(t){throw new Error(t+" "+this.cur.value)},t}();r.ParserImpl=C},{"./expressions":1,"./lexer":3}],5:[function(t,e,r){"use strict";function n(t){switch(t){case 114:return"\r";case 102:return"\f";case 110:return"\n";case 116:return"\t";case 118:return"\v";case 92:return"\\";case 39:return"'";case 34:return'"';default:return String.fromCharCode(t)}}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function t(t){this.str=t||"",this.idx=0,this.mark=0,this.eof=!t}return t.prototype.next=function(){var t=this.readPastWhitespace();return t>=65&&t<=90||t>=97&&t<=122||95===t||36===t?this.readIdentifier():t>=48&&t<=57||46===t&&this.peek1()>=48&&this.peek1()<=57?this.readNumber():34===t||39===t?this.readString(34===t?'"':"'"):t?this.readSymbol(t):this.createEofToken()},t.prototype.readPastWhitespace=function(){for(var t=this.eof?0:this.str.charCodeAt(this.idx);32===t||9===t||10===t||13===t||160===t;)t=this.str.charCodeAt(++this.idx);return this.mark=this.idx,t},t.prototype.readString=function(t){this.consume();var e=this.str.indexOf("\\",this.idx),r=this.str.indexOf(t,this.idx);return-1===e&&-1!==r?this.createStringToken(r):this.readComplexString(t,r,e)},t.prototype.readComplexString=function(t,e,r){for(var i=this.str,s="",o=this.idx;-1!==e;){if(-1===r||e<r)return this.createStringToken(e,s+i.substring(o,e));s+=i.substring(o,r)+n(i.charCodeAt(r+1)),o=r+2,e<o&&(e=i.indexOf(t,o)),r=i.indexOf("\\",o)}this.raiseError("Unterminated quote")},t.prototype.readNumber=function(){for(var t=this.consume();t>=48&&t<=57;)t=this.consume();if(46===t)for(t=this.consume();t>=48&&t<=57;)t=this.consume();return this.createToken("number",0)},t.prototype.readIdentifier=function(){for(var t=this.consume();36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57;)t=this.consume();return this.createToken("token",0)},t.prototype.readSymbol=function(t){return this.createToken("symbol",60===t||62===t?61===this.peek1()?2:1:38===t||124===t?this.peek1()===t?2:1:61!==t&&33!==t||61!==this.peek1()?1:61===this.peek2()?3:2)},t.prototype.createToken=function(t,e){return this.idx+=e,new s(t,this.str.substring(this.mark,this.idx),this.mark,this.idx-1)},t.prototype.createEofToken=function(){return this.idx=this.str.length,this.eof=!0,new s("eof","",this.str.length,this.str.length)},t.prototype.createStringToken=function(t,e){return this.idx=t+1,new s("string",e||this.str.substring(this.mark+1,t),this.mark,t)},t.prototype.raiseError=function(t){throw this.idx=this.str.length,this.eof=!0,new Error(t)},t.prototype.peek1=function(){return this.str.charCodeAt(this.idx+1)},t.prototype.peek2=function(){return this.str.charCodeAt(this.idx+2)},t.prototype.consume=function(){return this.str.charCodeAt(++this.idx)},t}();r.Scanner=i;var s=function(){function t(t,e,r,n){this.type=t,this.value=e,this.start=r,this.end=n}return t}()},{}]},{},[2]);
//# sourceMappingURL=bundle.js.map
